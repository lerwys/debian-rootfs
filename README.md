debian-rootfs
===============================

Overview
--------

This repository contains scripts to setup a complete rootfs based on
debian-9, docker and all of the necessary packages for a rootfs to be
used in a production environment.

This was designed to be used as a docker bind mount to the
NFS-server available here: https://github.com/lnls-sirius/docker-nfs-server

### Build rootfs/homes

    ./create-all.sh

### Create rootfs TAR

    ./create-tar-rootfs.sh

### Create homefs TAR

    ./create-tar-homefs.sh

### Create image containing entire rootfs (for usage as a volume in nfs-server)

First, the rootfs must be generated by running:

    ./create-rootfs.sh

Then, a tar.gz must be created with the rootfs contents:

    ./create-tar-rootfs.sh

Finally, the docker image can be built:

    docker build -f Dockerfile.rootfs -t lnls/debian-rootfs .

Most of the time the dockerhub image should be used, not the
locally generated ones. If in doubt use the dockerhub one.

### Create image containing entire homefs (for usage as a volume in nfs-server)

First, the homefs must be generated by running:

    ./create-homes.sh

Then, a tar.gz must be created with the homes contents:

    ./create-tar-homes.sh

Finally, the docker image can be built:

    docker build -f Dockerfile.homefs -t lnls/debian-homefs .

Most of the time the dockerhub image should be used, not the
locally generated ones. If in doubt use the dockerhub one.
